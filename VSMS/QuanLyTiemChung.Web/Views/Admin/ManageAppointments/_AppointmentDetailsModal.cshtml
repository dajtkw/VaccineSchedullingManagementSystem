@* Views/Admin/ManageAppointments/_AppointmentDetailsModal.cshtml *@
@model QuanLyTiemChung.Web.Models.Appointment
@{
    Func<string, string> GetStatusBadgeClass = (status) =>
    {
        return status switch
        {
            "Confirmed" => "badge bg-success",
            "Completed" => "badge bg-primary",
            "Pending" => "badge bg-warning text-dark",
            "Cancelled" => "badge bg-danger",
            _ => "badge bg-secondary"
        };
    };
}

@if (Model == null)
{
    <div class="alert alert-danger">Kh√¥ng t√¨m th·∫•y th√¥ng tin l·ªãch h·∫πn.</div>
}
else
{
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-6 mb-4">
                <h6 class="mb-3 text-primary"><i class="fas fa-user me-2"></i>Th√¥ng tin ng∆∞·ªùi ƒëƒÉng k√Ω</h6>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <strong>H·ªç v√† t√™n:</strong>
                        <span>@(Model.User?.FullName ?? "N/A")</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <strong>Email:</strong>
                        <span>@(Model.User?.Email ?? "N/A")</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <strong>S·ªë ƒëi·ªán tho·∫°i:</strong>
                        <span>@(Model.User?.PhoneNumber ?? "N/A")</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <strong>Ng√†y sinh:</strong>
                        <span>@(Model.User?.DateOfBirth.ToString("dd/MM/yyyy") ?? "N/A")</span>
                    </li>
                </ul>
            </div>

            <div class="col-md-6 mb-4">
                <h6 class="mb-3 text-primary"><i class="fas fa-calendar-alt me-2"></i>Th√¥ng tin l·ªãch h·∫πn</h6>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <strong>Tr·∫°ng th√°i:</strong>
                        <span class="@GetStatusBadgeClass(Model.Status)">@Model.Status</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <strong>Ng√†y h·∫πn:</strong>
                        <strong>@Model.ScheduledDateTime.ToString("HH:mm - dd/MM/yyyy")</strong>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <strong>Ng√†y ƒëƒÉng k√Ω:</strong>
                        <span>@Model.CreatedAt.ToString("HH:mm - dd/MM/yyyy")</span>
                    </li>
                </ul>
            </div>
        </div>

        <div class="row">
            <div class="col-12">
                <h6 class="mb-3 text-primary"><i class="fas fa-syringe me-2"></i>Th√¥ng tin v·∫Øc-xin & ƒê·ªãa ƒëi·ªÉm</h6>
                <div class="card">
                    <div class="card-body">
                        <dl class="row mb-0">
                            <dt class="col-sm-3">V·∫Øc-xin:</dt>
                            <dd class="col-sm-9">@(Model.Vaccine?.TradeName ?? "N/A")</dd>

                            <dt class="col-sm-3">M≈©i th·ª©:</dt>
                            <dd class="col-sm-9">@Model.DoseNumber</dd>

                            <hr class="my-2">

                            <dt class="col-sm-3">ƒê·ªãa ƒëi·ªÉm ti√™m:</dt>
                            <dd class="col-sm-9">@(Model.VaccinationSite?.Name ?? "N/A")</dd>

                            <dt class="col-sm-3">ƒê·ªãa ch·ªâ:</dt>
                            <dd class="col-sm-9">@(Model.VaccinationSite?.Address ?? "N/A")</dd>
                        </dl>
                    </div>
                </div>
            </div>
        </div>

        @* üî• B·∫ÆT ƒê·∫¶U PH·∫¶N B·ªî SUNG GHI CH√ö *@
        @if (!string.IsNullOrEmpty(Model.Notes))
        {
            <div class="row mt-3">
                <div class="col-12">
                    <h6 class="mb-3 text-primary"><i class="fas fa-sticky-note me-2"></i>Ghi ch√∫ t·ª´ ng∆∞·ªùi ƒëƒÉng k√Ω</h6>
                    <div class="card bg-light border">
                        <div class="card-body">
                            <p class="mb-0 fst-italic">"@Model.Notes"</p>
                        </div>
                    </div>
                </div>
            </div>
        }
        @* üî• K·∫æT TH√öC PH·∫¶N B·ªî SUNG GHI CH√ö *@
    </div>

    <div class="modal-footer mt-3">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
            <i class="fas fa-times me-2"></i>ƒê√≥ng
        </button>
    </div>
}
